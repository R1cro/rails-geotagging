<script type="text/javascript">
  function getLocation(){
    navigator.geolocation.getCurrentPosition(handleSuccess,handleError);
  }

  function handleSuccess(position){
    drawMap(position);
  }

  function handleError(error){
    switch(error.code)
    {
      case error.PERMISSION_DENIED: alert("Google Chrome? You must use HTTPS non HTTP...");break;
      case error.POSITION_UNAVAILABLE: alert("Could not detect current position");break;
      case error.TIMEOUT: alert("Retrieving position timed out");break;
      default: alert("Unknown Error");break;
    }
  }

  function drawMap(position) {
    var container = $('#map');
    var myLatLong = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
    var mapOptions = {
      center: myLatLong,
      zoom: 17,
      mapTypeId: google.maps.MapTypeId.HYBRID
    };
    var map = new google.maps.Map(container[0],mapOptions);
    container.css('display','block');
    var marker = new google.maps.Marker({
      position: myLatLong,
      map:map,
    });
    var infowindow = new google.maps.InfoWindow({
      content: '<b>You are here!</b>' + '<br><br>Latitude: ' + myLatLong.lat() + '<br>Longitude: ' + myLatLong.lng()
  });
    infowindow.open(map, marker);
  }
</script>
