<script type="text/javascript">
  navigator.geolocation.getCurrentPosition(handleSuccess,handleError);

  function handleSuccess(position){
    drawMap(position);
  }

  function handleError(error){
    switch(error.code)
    {
      case error.PERMISSION_DENIED: alert("Google Chrome? You must use HTTPS not HTTP...");break;
      case error.POSITION_UNAVAILABLE: alert("Could not detect current position");break;
      case error.TIMEOUT: alert("Retrieving position timed out");break;
      default: alert("Unknown Error");break;
    }
  }

  function drawMap(position) {
    var container = $('#map');
    var myLatLong = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
    var mapOptions = {
      center: myLatLong,
      zoom: 17,
      mapTypeId: google.maps.MapTypeId.HYBRID
    };
    var map = new google.maps.Map(container[0],mapOptions);
    container.css('display','block');
    var infowindow = new google.maps.InfoWindow({
      map: map,
      position: myLatLong,
      content:
      '<b>You are here!</b>' + '<br><br>Latitude: ' + position.coords.latitude + '<br>Longitude: ' + position.coords.longitude
    });
    infowindow.open(map);
  }
</script>
